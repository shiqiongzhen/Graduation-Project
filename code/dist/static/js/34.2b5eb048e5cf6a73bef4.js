webpackJsonp([34],{V5DN:function(e,s){},nybq:function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t={props:{},data:function(){return{containner:"personalMsg",headUrl:localStorage.getItem("headUrl")||"",editMessage:!1,userInfo:{userId:"",nickname:"",userNumber:"",headUrl:"",userIdent:"",mail:"",phone:"",college:"",series:"",major:"",className:""},rules:{phone:[{required:!0,message:"不能为空",trigger:"blur"}],mail:[{required:!0,message:"不能为空",trigger:"blur"}]}}},computed:{},created:function(){var e=this;this.$http.get("/teaching/user/info/"+localStorage.getItem("userId")).then(function(s){"0"==s.data.code?e.userInfo=s.data.data:"1"==s.data.code?e.$router.push("/login"):e.userInfo=s.data.data}).catch(function(e){console.log(e)})},mounted:function(){},watch:{},methods:{beforeAvatarUpload:function(e){var s=this,a="image/jpeg"===e.type,t=e.size/1024/1024<2;if(a||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&t){var n=new FormData;return n.append("file",e),this.$http.post("/teaching/common/file/uploadPic",n).then(function(e){return e.data.data.url}).then(function(e){s.headUrl=e,s.$http.post("/teaching/user/updateInfo",{headUrl:e}).then(function(a){"0"==a.data.code&&(localStorage.setItem("headUrl",e),s.$message({message:"更新成功！",type:"success"}))}).catch(function(e){console.log(e)})}).catch(function(e){s.$message({message:"上传失败！"+e,type:"error"})}),!1}return!1},navToPersonalMsg:function(){this.containner="personalMsg",this.$router.push("/admin/user")},navToIdentify:function(){this.containner="identify",this.$router.push("/admin/identify")},closeInfo:function(){this.editMessage=!1},updateInfo:function(e){var s=this;this.$refs[e].validate(function(e){e&&s.$http.post("/teaching/user/updateInfo",{phone:s.userInfo.phone,email:s.userInfo.mail}).then(function(e){"0"==e.data.code?(s.editMessage=!1,s.$message({message:"更新成功！",type:"success"})):s.$message({message:e.data.msg,type:"error"})}).catch(function(e){console.log(e)})})}},components:{}},n={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"page"},[a("div",{staticClass:"divideLine"}),e._v(" "),a("div",{staticClass:"containner"},[a("div",{staticClass:"leftMenu"},[a("div",{staticClass:"userInfo"},[a("img",{staticClass:"headPic",attrs:{src:e.headUrl,alt:""}}),e._v(" "),a("div",{staticClass:"describe"},[a("h3",[e._v(e._s(e.userInfo.nickname))]),e._v(" "),a("p",[e._v(e._s(e.userInfo.userIdent))]),e._v(" "),a("p",[e._v("学号："+e._s(e.userInfo.userNumber))])])]),e._v(" "),a("ul",{staticClass:"menu"},[a("li",{on:{click:function(s){return e.navToPersonalMsg()}}},[a("span",[e._v("个人信息")]),a("i",{staticClass:"el-icon-arrow-right"})]),e._v(" "),a("li",{on:{click:function(s){return e.navToIdentify()}}},[a("span",[e._v("身份认证")]),a("i",{staticClass:"el-icon-arrow-right"})])])]),e._v(" "),"personalMsg"==e.containner?a("div",{staticClass:"rightContainner"},[a("div",{staticClass:"title"},[e._v("\n                个人信息\n            ")]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"headInfo"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[a("div",{staticClass:"uploadBox"},[e.headUrl?a("img",{staticClass:"avatar",attrs:{src:e.headUrl}}):e._e(),e._v(" "),e.headUrl?a("span",{staticClass:"avatar-label"},[e._v("编辑封面")]):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])])],1),e._v(" "),a("div",{staticClass:"navTitle"},[a("span",{staticClass:"subTitle"},[e._v("基本信息")]),e._v(" "),a("i",{staticClass:"el-icon-edit-outline",on:{click:function(s){e.editMessage=!e.editMessage}}})]),e._v(" "),0==e.editMessage?a("div",{staticClass:"userInfo"},[a("div",[a("span",{staticClass:"label"},[e._v("姓名")]),a("span",[e._v(e._s(e.userInfo.nickname))])]),e._v(" "),a("div",[a("span",{staticClass:"label"},[e._v("身份")]),a("span",[e._v(e._s(e.userInfo.userIdent))])]),e._v(" "),a("div",[a("span",{staticClass:"label"},[e._v("学号/工号")]),a("span",[e._v(e._s(e.userInfo.userNumber))])]),e._v(" "),a("div",[a("span",{staticClass:"label"},[e._v("所在院")]),a("span",[e._v(e._s(e.userInfo.college))])]),e._v(" "),a("div",[a("span",{staticClass:"label"},[e._v("所在系")]),a("span",[e._v(e._s(e.userInfo.series))])]),e._v(" "),a("div",[a("span",{staticClass:"label"},[e._v("所在专业")]),a("span",[e._v(e._s(e.userInfo.major))])]),e._v(" "),a("div",[a("span",{staticClass:"label"},[e._v("班级")]),a("span",[e._v(e._s(e.userInfo.className))])]),e._v(" "),a("div",[a("span",{staticClass:"label"},[e._v("手机号码")]),a("span",[e._v(e._s(e.userInfo.phone||"无"))])]),e._v(" "),a("div",[a("span",{staticClass:"label"},[e._v("邮箱")]),a("span",[e._v(e._s(e.userInfo.mail||"无"))])])]):a("div",{staticClass:"userInfo"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.userInfo,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{disabled:"true"},model:{value:e.userInfo.nickname,callback:function(s){e.$set(e.userInfo,"nickname",s)},expression:"userInfo.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份"}},[a("el-input",{attrs:{disabled:"true"},model:{value:e.userInfo.userIdent,callback:function(s){e.$set(e.userInfo,"userIdent",s)},expression:"userInfo.userIdent"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学号/工号"}},[a("el-input",{attrs:{disabled:"true"},model:{value:e.userInfo.userNumber,callback:function(s){e.$set(e.userInfo,"userNumber",s)},expression:"userInfo.userNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在院"}},[a("el-input",{attrs:{disabled:"true"},model:{value:e.userInfo.college,callback:function(s){e.$set(e.userInfo,"college",s)},expression:"userInfo.college"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在系"}},[a("el-input",{attrs:{disabled:"true"},model:{value:e.userInfo.series,callback:function(s){e.$set(e.userInfo,"series",s)},expression:"userInfo.series"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在专业"}},[a("el-input",{attrs:{disabled:"true"},model:{value:e.userInfo.major,callback:function(s){e.$set(e.userInfo,"major",s)},expression:"userInfo.major"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"班级"}},[a("el-input",{attrs:{disabled:"true"},model:{value:e.userInfo.className,callback:function(s){e.$set(e.userInfo,"className",s)},expression:"userInfo.className"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{model:{value:e.userInfo.phone,callback:function(s){e.$set(e.userInfo,"phone",s)},expression:"userInfo.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"mail"}},[a("el-input",{model:{value:e.userInfo.mail,callback:function(s){e.$set(e.userInfo,"mail",s)},expression:"userInfo.mail"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(s){return e.updateInfo("form")}}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(s){return e.closeInfo()}}},[e._v("取消")])],1)],1)],1)])]):e._e(),e._v(" "),"identify"==e.containner?a("div",{staticClass:"rightContainner"},[a("router-view")],1):e._e()])])},staticRenderFns:[]};var r=a("VU/8")(t,n,!1,function(e){a("V5DN")},"data-v-5c64cd2f",null);s.default=r.exports}});
//# sourceMappingURL=34.2b5eb048e5cf6a73bef4.js.map