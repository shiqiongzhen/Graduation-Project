webpackJsonp([33],{HHjC:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:{},data:function(){return{detail:"",loading:!0,isOver:!1,isLock:!1,editIntro:!1,editMessage:!1,rules:{experimentName:[{required:!0,message:"不能为空",trigger:"blur"}],courseName:[{required:!0,message:"不能为空",trigger:"blur"}],courseCode:[{required:!0,message:"不能为空",trigger:"blur"}],courseCredit:[{required:!0,message:"不能为空",trigger:"blur"}]}}},computed:{},created:function(){this.init()},mounted:function(){},filters:{courseStatus:function(e){switch(e){case 0:return"正常";case 1:return"锁定";case 2:return"删除";case 3:return"结束";default:return""}}},methods:{handleAvatarSuccess:function(e,t){this.detail.courseCover=e.data.url},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,s=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&s},updateInfo:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$http.post("/teaching/teacher/course/updateCourseInfo",{courseId:t.$route.params.courseId,courseDetailId:t.detail.courseDetailId,courseCode:t.detail.courseCode,courseName:t.detail.courseName,courseCredit:t.detail.courseCredit,courseCover:t.detail.courseCover}).then(function(e){"0"==e.data.code?(t.editMessage=!1,t.$message({message:"更新成功！",type:"success"})):"1"==e.data.code?t.$router.push("/login"):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){console.log(e)})})},updateIntro:function(){var e=this;this.$http.post("/teaching/teacher/course/updateCourseInfo",{courseId:this.$route.params.courseId,courseDetailId:this.detail.courseDetailId,courseIntroduction:this.detail.courseIntroduction}).then(function(t){"0"==t.data.code?(e.editIntro=!1,e.$message({message:"更新成功！",type:"success"})):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})},closeInfo:function(){this.editMessage=!1,this.init()},closeIntro:function(){this.editIntro=!1,this.init()},lockCourse:function(){var e=this;this.$http.get("/teaching/teacher/course/lock/"+this.$route.params.courseId).then(function(t){"0"==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.isLock=!0):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})},recoverCourse:function(){var e=this;this.$http.get("/teaching/teacher/course/unlock/"+this.$route.params.courseId).then(function(t){"0"==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.isLock=!1):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})},overCourse:function(){var e=this;this.$http.get("/teaching/teacher/course/end/"+this.$route.params.courseId).then(function(t){"0"==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.isOver=!0):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})},delCourse:function(){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.get("/teaching/teacher/course/invalid/"+e.$route.params.courseId).then(function(t){"0"==t.data.code?e.$router.push("/admin"):"1"==t.data.code?e.$router.push("/login"):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},init:function(){var e=this;this.$http.get("/teaching/teacher/course/detail/"+this.$route.params.courseId).then(function(t){"0"==t.data.code?(e.detail=t.data.data,3==e.detail.courseStatus&&(e.isOver=!0),1==e.detail.courseStatus&&(e.isLock=!0),0==e.detail.courseStatus&&(e.isLock=!1)):e.$message({message:t.data.msg,type:"error"}),e.loading=!1}).catch(function(e){console.log(e)})}},components:{spin:s("ly8Z").a}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"messageTitle"},[e._v("\n        全部\n    ")]),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"navTitle"},[a("span",{staticClass:"title"},[e._v("基本信息")]),e._v(" "),a("i",{staticClass:"el-icon-edit-outline",on:{click:function(t){e.editMessage=!e.editMessage}}})]),e._v(" "),e.loading||""!=e.detail?e._e():a("div",[a("el-alert",{attrs:{title:"暂无数据",type:"info",center:"","show-icon":""}})],1),e._v(" "),a("spin",{attrs:{loading:e.loading}}),e._v(" "),0==e.editMessage?a("div",{staticClass:"message"},[a("div",{staticClass:"item"},[a("span",{staticClass:"image"},[""!=e.detail.courseCover?a("img",{attrs:{src:e.detail.courseCover}}):e._e(),e._v(" "),""==e.detail.courseCover?a("img",{attrs:{src:s("dkqV")}}):e._e()]),e._v(" "),a("span",{staticClass:"description"},[a("div",[e._v("老师："+e._s(e.detail.teacherNickname))]),e._v(" "),a("div",[e._v("课程："+e._s(e.detail.courseName))]),e._v(" "),a("div",[e._v("代码："+e._s(e.detail.courseCode))]),e._v(" "),a("div",[e._v("学分："+e._s(e.detail.courseCredit))]),e._v(" "),a("div",[e._v("状态："),a("span",{staticClass:"textColor"},[e._v(e._s(e._f("courseStatus")(e.detail.courseStatus)))])])])])]):a("div",{staticClass:"editMessage"},[a("div",{staticClass:"item"},[a("div",{staticClass:"imageBox"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/teaching/common/file/uploadPic","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("div",{staticClass:"uploadBox"},[e.detail.courseCover?a("img",{staticClass:"avatar",attrs:{src:e.detail.courseCover}}):e._e(),e._v(" "),e.detail.courseCover?a("span",{staticClass:"avatar-label"},[e._v("编辑封面")]):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])])],1),e._v(" "),a("span",{staticClass:"description"},[a("el-form",{ref:"detail",attrs:{rules:e.rules,model:e.detail,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"老师名称",prop:"teacherNickname"}},[e._v("\n                            "+e._s(e.detail.teacherNickname)+"\n                        ")]),e._v(" "),a("el-form-item",{attrs:{label:"课程",prop:"courseName"}},[a("el-input",{model:{value:e.detail.courseName,callback:function(t){e.$set(e.detail,"courseName",t)},expression:"detail.courseName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码",prop:"courseCode"}},[a("el-input",{model:{value:e.detail.courseCode,callback:function(t){e.$set(e.detail,"courseCode",t)},expression:"detail.courseCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学分",prop:"courseCredit"}},[a("el-input",{model:{value:e.detail.courseCredit,callback:function(t){e.$set(e.detail,"courseCredit",t)},expression:"detail.courseCredit"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.updateInfo("detail")}}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.closeInfo()}}},[e._v("取消")])],1)],1)],1)])]),e._v(" "),a("div",{staticClass:"navTitle"},[a("span",{staticClass:"title"},[e._v("基础介绍")]),e._v(" "),a("i",{staticClass:"el-icon-edit-outline",on:{click:function(t){e.editIntro=!e.editIntro}}})]),e._v(" "),0==e.editIntro?a("div",{staticClass:"introContent",domProps:{innerHTML:e._s(e.detail.courseIntroduction)}}):a("div",{staticClass:"introContent"},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入内容"},model:{value:e.detail.courseIntroduction,callback:function(t){e.$set(e.detail,"courseIntroduction",t)},expression:"detail.courseIntroduction"}}),e._v(" "),a("div",{staticClass:"attachTxt"},[e._v("\n                最多200字\n            ")]),e._v(" "),a("div",{staticClass:"btnGroup-center"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.updateIntro()}}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.closeIntro()}}},[e._v("取消")])],1)],1),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"introContent"},[a("el-row",[0==e.isLock?a("span",[a("el-button",{staticStyle:{"background-color":"#F79500"},attrs:{disabled:e.isOver},on:{click:function(t){return e.lockCourse()}}},[e._v("锁定课程")])],1):e._e(),e._v(" "),1==e.isLock?a("span",[a("el-button",{attrs:{type:"success",disabled:e.isOver},on:{click:function(t){return e.recoverCourse()}}},[e._v("恢复课程")])],1):e._e(),e._v(" "),a("span",[a("el-button",{attrs:{type:"danger",disabled:e.isOver},on:{click:function(t){return e.overCourse()}}},[e._v("完结课程")])],1),e._v(" "),a("span",[a("el-button",{attrs:{type:"info",disabled:!e.isOver},on:{click:function(t){return e.delCourse()}}},[e._v("删除课程")])],1)]),e._v(" "),a("div",{staticClass:"btnText"},[e._v("注：只有已结束的课程才可以被删除")])],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"navTitle"},[t("span",{staticClass:"title"},[this._v("班课操作")])])}]};var o=s("VU/8")(a,i,!1,function(e){s("N6qR")},"data-v-42805eaa",null);t.default=o.exports},N6qR:function(e,t){}});
//# sourceMappingURL=33.2eca425d968fb7d2b435.js.map