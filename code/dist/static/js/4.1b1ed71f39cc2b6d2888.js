webpackJsonp([4],{Bmo4:function(t,e){t.exports="data:image/png;base64,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"},EVaM:function(t,e){},XUvF:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),o=s.n(i),a={props:{},data:function(){var t=this.$route.query,e=t.targetName,s=t.targetId;return{myHeadUrl:localStorage.getItem("headUrl")||"",websock:null,noticeList:[],targetName:e,targetId:s,content:""}},computed:{},created:function(){this.initChat(),this.initWebSocket()},destroyed:function(){this.websock.close()},mounted:function(){},watch:{$route:function(t,e,s){console.log("route1",this.$route.params.chatId,this.$route.query.targetName),this.initData(),this.initChat(),this.initWebSocket()}},methods:{read:function(){console.log("read");var t=o()({fromId:localStorage.getItem("userId")||"",toId:this.targetId,type:1,content:"[messId]??",timestamp:(new Date).getTime(),Describe:""});this.websock.send(t)},initData:function(){var t=this.$route.query,e=t.targetName,s=t.targetId;this.websock=null,this.noticeList=[],this.targetName=e,this.targetId=s,this.content="",console.log("initData",this.noticeList)},initChat:function(){var t=this;this.$http.get("/teaching/message/conversation?page=1&size=10&conversationId="+this.$route.params.chatId).then(function(e){"0"==e.data.code?(t.noticeList=e.data.data,console.log("initChat",t.noticeList)):t.$message({message:e.data.msg,type:"error"})}).catch(function(t){console.log(t)})},initWebSocket:function(){console.log("initWebSocket");var t="/teaching/imserver/"+(localStorage.getItem("userId")||"");this.websock=new WebSocket(t),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(t){console.log("socket连接成功",t),this.read()},websocketonerror:function(t){console.log("连接错误",t),this.initWebSocket()},websocketonmessage:function(t){console.log("数据接收",t.data);var e=JSON.parse(t.data);e&&0==e.type?(this.content="",this.initChat()):e&&2==e.type?(this.content="",this.initChat()):this.$message({message:"发送失败，请重试！",type:"error"})},websocketsend:function(){console.log("数据发送",this.content);var t=o()({fromId:localStorage.getItem("userId")||"",toId:this.targetId,type:0,content:this.content,timestamp:(new Date).getTime(),Describe:""});this.websock.send(t)},websocketclose:function(t){console.log("断开连接",t)}},components:{}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page"},[i("div",{staticClass:"title"},[t._v(t._s(t.targetName))]),t._v(" "),i("ul",{staticClass:"chat"},t._l(t.noticeList.message,function(e,o){return i("li",{key:o},[0==e.fromMe?i("div",{staticClass:"left"},[t.noticeList.targetHeadUrl?i("img",{attrs:{src:t.noticeList.targetHeadUrl,alt:""}}):i("img",{attrs:{src:s("Bmo4"),alt:""}}),t._v(" "),i("span",{staticClass:"description"},[i("p",[t._v(t._s(e.time))]),t._v(" "),i("p",[t._v(t._s(e.content))])])]):i("div",{staticClass:"right"},[i("span",{staticClass:"description"},[i("p",[t._v(t._s(e.time))]),t._v(" "),i("p",[t._v(t._s(e.content))])]),t._v(" "),t.myHeadUrl?i("img",{attrs:{src:t.myHeadUrl,alt:""}}):i("img",{attrs:{src:s("Bmo4"),alt:""}})])])}),0),t._v(" "),i("div",{staticClass:"footer"},[i("el-input",{attrs:{placeholder:"回复一下吧",maxlength:"500","show-word-limit":"",autosize:{minRows:4,maxRows:4}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},[i("template",{slot:"append"},[i("el-button",{on:{click:function(e){return t.websocketsend()}}},[t._v("发送")])],1)],2)],1)])},staticRenderFns:[]};var c=s("VU/8")(a,n,!1,function(t){s("EVaM")},"data-v-3565e542",null);e.default=c.exports},mvHQ:function(t,e,s){t.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(t,e,s){var i=s("FeBl"),o=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}}});
//# sourceMappingURL=4.1b1ed71f39cc2b6d2888.js.map