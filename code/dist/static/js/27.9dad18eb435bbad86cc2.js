webpackJsonp([27],{"0nBc":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("5YLu"),s={props:{},data:function(){return{navData:[{name:"实验打分",path:"/admin/courseList/score/"+this.$route.params.courseId},{name:"学生打分界面",path:""}],form:{},imageUrl:"",rules:{status:[{required:!0,message:"不能为空",trigger:"blur"}],teacherComment:[{required:!0,message:"不能为空",trigger:"blur"}],experimentAchievement:[{required:!0,pattern:/^([1-9]?\d|0|100)$/,message:"不能为空或数值应在0~100之间的整数",trigger:"blur"}]}}},computed:{},created:function(){var e=this;this.$http.get("/teaching/teacher/achievement/judge/detail/"+this.$route.params.experimentId+"?&userId="+this.$route.params.userId).then(function(t){"0"==t.data.code?(e.form=t.data.data,1==e.form.status?e.form.status="1":e.form.status="0"):e.$message({message:t.data.msg,type:"error"}),e.loading=!1}).catch(function(e){console.log(e)})},mounted:function(){},watch:{},methods:{getComment:function(){var e=this;this.$http.get("/teaching/teacher/achievement/judge/getOneComment?score="+this.form.experimentAchievement).then(function(t){"0"==t.data.code?e.form.teacherComment=t.data.data:e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})},routeToNotice:function(e,t){var r="";r=Number(t)>Number(localStorage.getItem("userId"))?localStorage.getItem("userId")+"-"+t:t+"-"+localStorage.getItem("userId"),this.$router.push({path:"/admin/myNotice/"+r,query:{targetName:e,targetId:t}})},cancle:function(){this.$router.push("/admin/courseList/score/"+this.$route.params.courseId)},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$http.post("/teaching/teacher/achievement/judge/save",{userExperimentId:t.form.userExperimentId,teacherComment:t.form.teacherComment,status:t.form.status,experimentAchievement:t.form.experimentAchievement}).then(function(e){"0"==e.data.code?(t.$message({message:"打分成功！",type:"success"}),t.$router.push("/admin/courseList/score/"+t.$route.params.courseId)):"1"==e.data.code?t.$router.push("/login"):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){console.log(e)})})},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r}},components:{breadCrumb:r("ZmIX").a,TinymceEditor:a.a}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page"},[r("div",{staticClass:"containner"},[r("breadCrumb",{attrs:{data:e.navData}}),e._v(" "),r("div",{staticClass:"contain"},[r("span",{staticClass:"headInfo"},[r("img",{attrs:{src:e.form.headUrl,alt:""}}),e._v(" "),r("span",[r("h4",[e._v(e._s(e.form.userName)+"\n                        "),r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.routeToNotice(e.form.userName,e.form.userId)}}},[r("i",{staticClass:"el-icon-message"}),e._v("发消息\n                        ")])],1),e._v(" "),r("p",[e._v(e._s(e.form.userNumber))])])]),e._v(" "),r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"学生答案"}},[r("tinymceEditor",{attrs:{disabled:"true"},model:{value:e.form.userExperimentText,callback:function(t){e.$set(e.form,"userExperimentText",t)},expression:"form.userExperimentText"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"答案附件"}},[e.form.userExperimentFile&&"0"!=e.form.userExperimentFile.length?e._l(e.form.userExperimentFile,function(t,a){return r("p",{key:a},[r("a",{attrs:{href:t.filePath}},[e._v(e._s(t.fileName))])])}):r("p",[e._v("无")])],2),e._v(" "),r("el-form-item",{attrs:{label:"是否通过",prop:"status"}},[r("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),1==e.form.status?r("el-form-item",{attrs:{label:"最终分数",prop:"experimentAchievement"}},[r("el-input",{model:{value:e.form.experimentAchievement,callback:function(t){e.$set(e.form,"experimentAchievement",t)},expression:"form.experimentAchievement"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"老师评语",prop:"teacherComment"}},[r("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入内容"},model:{value:e.form.teacherComment,callback:function(t){e.$set(e.form,"teacherComment",t)},expression:"form.teacherComment"}}),e._v(" "),r("span",{staticClass:"randomComment",on:{click:function(t){return e.getComment()}}},[e._v("\n                        点击随机生成 "),r("i",{staticClass:"el-icon-edit"})]),e._v(" "),r("div",{staticClass:"attachTxt"},[e._v("\n                        最多200字\n                    ")])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:function(t){return e.cancle()}}},[e._v("取消")])],1)],1)],1)],1)])},staticRenderFns:[]};var n=r("VU/8")(s,o,!1,function(e){r("rgzw")},"data-v-8f109d16",null);t.default=n.exports},rgzw:function(e,t){}});
//# sourceMappingURL=27.9dad18eb435bbad86cc2.js.map