webpackJsonp([32],{DpPf:function(e,t){},RZe2:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("5YLu"),r=s("gjrl"),i={props:{},data:function(){return{activeName:"content",experimentName:"",experimentAnswerId:"",experimentList:[],recordText:"",editorHeight:"55vh",recordFile:[],someFile:[],drawer:!1,isDisable:!0}},computed:{},created:function(){this.clearData(this.init())},mounted:function(){},filters:{recordStatus:function(e){switch(e){case 0:return"待审核";case 1:return"已审核";case 2:return"未通过";case 3:return"未提交";case 4:return"未解锁";case 5:return"已结束";default:return""}}},methods:{updateRecordFile:function(e){this.recordFile=e,this.$message({message:"保存成功！",type:"success"})},transformFile:function(e){var t=[];if(e instanceof Array)for(var s=0;s<e.length;s++)t.push({name:e[s].fileName,url:e[s].filePath});return t},init:function(){var e=this;this.$http.get("/teaching/student/experiment/info/"+this.$route.params.experimentId).then(function(t){if("0"==t.data.code){if(t.data.data.experiment){var s=t.data.data.experiment;e.experimentName=s.experimentName,e.experimentAnswerId=s.experimentAnswerId}if(t.data.data.record){var a=t.data.data.record;e.recordFile=a.userExperimentFile||[],e.someFile=e.transformFile(e.recordFile),e.recordText=a.userExperimentText,0==t.data.data.experiment.experimentStatus&&1!=a.status&&4!=a.status&&(e.isDisable=!1)}else t.data.data.experiment&&0==t.data.data.experiment.experimentStatus&&(e.isDisable=!1)}else e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)}),this.$http.get("/teaching/student/course/info/"+this.$route.params.courseId).then(function(t){"0"==t.data.code?e.experimentList=t.data.data.experimentDTOList:e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})},clearData:function(){this.experimentName="",this.experimentList=[],this.recordText="",this.recordFile=[],this.isDisable=!0},handleClick:function(e,t){switch(e.label){case"实验内容":this.$router.push("/courseList/"+this.$route.params.courseId+"/content/"+this.$route.params.experimentId);break;case"实验资源":this.$router.push("/courseList/"+this.$route.params.courseId+"/resource/"+this.$route.params.experimentId);break;case"查看答案":this.$router.push("/courseList/"+this.$route.params.courseId+"/answer/"+this.$route.params.experimentId+"/"+this.experimentAnswerId);break;case"老师评价":this.$router.push("/courseList/"+this.$route.params.courseId+"/evaluation/"+this.$route.params.experimentId);break;default:return}},doExperiment:function(e){this.drawer=!1,this.$router.push("/courseList/"+this.$route.params.courseId+"/content/"+e),this.clearData(this.init())},submit:function(){var e=this;this.$http.post("/teaching/record/save",{experimentId:this.$route.params.experimentId,userExperimentText:this.recordText,userExperimentFile:this.recordFile}).then(function(t){"0"==t.data.code?(e.$message({message:"提交成功！",type:"success"}),e.$router.push("/courseList/experiment/"+e.$route.params.courseId)):"1"==t.data.code?e.$router.push("/login"):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})}},components:{TinymceEditor:a.a,uploadFile:r.a}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("div",{staticClass:"title"},[s("h3",[e._v(e._s(e.experimentName))])]),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"leftContent"},[s("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"实验内容",name:"content"}}),e._v(" "),s("el-tab-pane",{attrs:{label:"实验资源",name:"resource"}}),e._v(" "),s("el-tab-pane",{attrs:{label:"查看答案",name:"answer"}}),e._v(" "),s("el-tab-pane",{attrs:{label:"老师评价",name:"evaluation"}})],1),e._v(" "),s("div",{staticClass:"experimentContent"},[s("router-view")],1)],1),e._v(" "),s("div",{staticClass:"rightContent"},[s("div",{staticClass:"editor"},[s("tinymceEditor",{attrs:{height:e.editorHeight},model:{value:e.recordText,callback:function(t){e.recordText=t},expression:"recordText"}})],1),e._v(" "),s("div",{staticClass:"upload"},[s("uploadFile",{attrs:{allFile:e.recordFile,someFile:e.someFile,isClose:!1},on:{updateFile:e.updateRecordFile}})],1)])]),e._v(" "),s("div",{staticClass:"footer"},[s("div",{staticClass:"leftFooter"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.drawer=!0}}},[s("i",{staticClass:"el-icon-s-unfold"}),e._v(" 实验列表")])],1),e._v(" "),s("div",{staticClass:"rightFooter"},[s("el-button",{attrs:{type:"primary",disabled:e.isDisable},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)]),e._v(" "),s("el-drawer",{attrs:{title:"实验列表",visible:e.drawer,direction:"ltr"},on:{"update:visible":function(t){e.drawer=t}}},[s("ul",{staticClass:"sidebar"},e._l(e.experimentList,function(t,a){return s("li",{key:a,on:{click:function(s){return e.doExperiment(t.experimentId)}}},[s("span",{staticClass:"left"},[e._v(e._s(t.experimentName))]),e._v(" "),s("div",{staticClass:"right"},["0"==t.recordStatus?s("span",{staticClass:"statusZero ball"}):e._e(),e._v(" "),"1"==t.recordStatus?s("span",{staticClass:"statusOne ball"}):e._e(),e._v(" "),"2"==t.recordStatus?s("span",{staticClass:"statusTwo ball"}):e._e(),e._v(" "),"3"==t.recordStatus?s("span",{staticClass:"statusThree ball"}):e._e(),e._v(" "),"4"==t.recordStatus?s("span",{staticClass:"statusFour ball"},[s("i",{staticClass:"el-icon-lock"})]):e._e(),e._v(" "),"5"==t.recordStatus?s("span",{staticClass:"statusFive ball"}):e._e(),e._v(" "),s("span",[e._v(e._s(e._f("recordStatus")(t.recordStatus)))])])])}),0)])],1)},staticRenderFns:[]};var o=s("VU/8")(i,n,!1,function(e){s("DpPf")},"data-v-5998c480",null);t.default=o.exports}});
//# sourceMappingURL=32.658908b04f5004ec8178.js.map