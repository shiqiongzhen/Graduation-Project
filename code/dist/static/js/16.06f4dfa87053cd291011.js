webpackJsonp([16],{atNF:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={props:{},data:function(){var e=this;return{navData:[{name:"教师管理",path:""},{name:"查看信息",path:""}],searchContent:"",tableData:[],paginations:{page_current:1,page_size:5,total:0},isStop:[],isShowDel:[],batchSelection:[],isSelection:!1,isPass:!1,dialogId:"",form:{},rules:{newPass:[{validator:function(t,s,a){""===s?a(new Error("请输入密码")):(""!==e.form.checkNewPass&&e.$refs.form.validateField("checkNewPass"),a())},trigger:"blur"}],checkNewPass:[{validator:function(t,s,a){""===s?a(new Error("请再次输入密码")):s!==e.form.newPass?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]}}},computed:{},created:function(){this.handleCurrentChange()},mounted:function(){},methods:{resetPass:function(e){this.dialogId=e.userId,this.isPass=!0},updatePass:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$http.post("/teaching/user/resetPassword",t.Qs.stringify({userId:t.dialogId,password:t.form.newPass})).then(function(e){"0"==e.data.code?t.$message({message:"修改成功！",type:"success"}):"1"==e.data.code?t.$router.push("/login"):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){console.log(e)}),t.isPass=!1})},initIsStopAndIsShowDel:function(e){var t=this;e.forEach(function(e){"0"==e.userStatus?t.isStop.push(!1):t.isStop.push(!0),t.isShowDel.push(!1)})},handleSelectionChange:function(e){var t=[];e.forEach(function(e){t.push(e.userId)}),this.batchSelection=t},showDel:function(e){this.isShowDel[e]=!this.isShowDel[e],this.$set(this.isShowDel,e,this.isShowDel[e])},stop:function(e,t){var s=this,a=[];a.push(e.userId),this.$http.post("/teaching/user/banUsers",a).then(function(e){"0"==e.data.code?(s.handleCurrentChange(),s.$message({message:"状态已停用",type:"success"})):s.$message({message:e.data.msg,type:"error"})}).catch(function(e){console.log(e)})},recover:function(e,t){var s=this,a=[];a.push(e.userId),this.$http.post("/teaching/user/recoverUsers",a).then(function(e){"0"==e.data.code?(s.handleCurrentChange(),s.$message({message:"状态已恢复",type:"success"})):s.$message({message:e.data.msg,type:"error"})}).catch(function(e){console.log(e)})},del:function(e){var t=this;this.$confirm("此操作将永久删除该成员, 是否继续?","删除成员",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s=[];s.push(e.userId),t.$http.post("/teaching/user/invalidUser",s).then(function(e){"0"==e.data.code?(t.handleCurrentChange(),t.$message({message:"已删除",type:"success"})):"1"==e.data.code?t.$router.push("/login"):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},batchStop:function(){var e=this;if(0==this.isSelection)this.isSelection=!0,this.$message("请选择需要操作的记录!");else{var t=this.batchSelection;this.$http.post("/teaching/user/banUsers",t).then(function(t){"0"==t.data.code?(e.handleCurrentChange(),e.$message({message:"状态已批量停用",type:"success"})):"1"==t.data.code?e.$router.push("/login"):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})}},batchRecover:function(){var e=this;if(0==this.isSelection)this.isSelection=!0,this.$message("请选择需要操作的记录!");else{var t=this.batchSelection;this.$http.post("/teaching/user/recoverUsers",t).then(function(t){"0"==t.data.code?(e.handleCurrentChange(),e.$message({message:"状态已批量恢复",type:"success"})):"1"==t.data.code?e.$router.push("/login"):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})}},batchDel:function(){var e=this;this.$confirm("此操作将永久删除该成员, 是否继续?","删除成员",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(0==e.isSelection)e.isSelection=!0,e.$message("请选择需要操作的记录!");else{var t=e.batchSelection;e.$http.post("/teaching/user/invalidUser",t).then(function(t){"0"==t.data.code?(e.handleCurrentChange(),e.$message({message:"已批量删除",type:"success"})):"1"==t.data.code?e.$router.push("/login"):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)})}}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},routeToDetail:function(e){this.$router.push("/super/"+e.userId)},handleCurrentChange:function(e){var t=this;this.$http.get("/teaching/admin/teacher/teacherList?page="+this.paginations.page_current+"&size="+this.paginations.page_size+"&keyword="+this.searchContent).then(function(e){"0"==e.data.code?(t.tableData=e.data.data.list,t.initData(),t.initIsStopAndIsShowDel(t.tableData),t.paginations.total=e.data.data.total):t.$message({message:e.data.msg,type:"error"})}).catch(function(e){console.log(e)})},initData:function(){this.isSelection=!1,this.isStop=[],this.isShowDel=[],this.batchSelection=[],this.searchContent=""}},components:{breadCrumb:s("ZmIX").a}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("div",{staticClass:"head"},[s("breadCrumb",{attrs:{data:e.navData}}),e._v(" "),s("h4",[e._v("查看信息")])],1),e._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"filteBar"},[s("div",[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.batchStop()}}},[e._v("\n                    批量停用\n                ")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.batchRecover()}}},[e._v("\n                    批量恢复\n                ")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(t){return e.batchDel()}}},[e._v("\n                    批量删除\n                ")])],1),e._v(" "),s("div",[s("el-input",{attrs:{size:"small",placeholder:"根据姓名搜索","suffix-icon":"el-icon-search"},on:{change:e.handleCurrentChange},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}})],1)]),e._v(" "),s("div",{staticClass:"content"},[s("el-table",{attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[e.isSelection?s("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),s("el-table-column",{attrs:{fixed:"",prop:"userNumber",label:"教师工号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"nickname",label:"教师姓名"}}),e._v(" "),s("el-table-column",{attrs:{prop:"userStatus",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.userStatus?s("span",[s("span",{staticClass:"ball blueBall"}),s("span",{staticStyle:{"vertical-align":"middle"}},[e._v("运行中")])]):e._e(),e._v(" "),1==t.row.userStatus?s("span",[s("span",{staticClass:"ball redBall"}),s("span",{staticStyle:{"vertical-align":"middle"}},[e._v("已停用")])]):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:"operation"},[0==e.isStop[t.$index]?s("span",[s("el-button",{staticClass:"colorText",attrs:{type:"text",size:"small"},on:{click:function(s){return e.stop(t.row,t.$index)}}},[e._v("停用")])],1):s("span",[s("el-button",{staticClass:"recover",attrs:{type:"text",size:"small"},on:{click:function(s){return e.recover(t.row,t.$index)}}},[e._v("恢复")]),e._v(" "),s("i",{staticClass:"el-icon-arrow-down",staticStyle:{color:"#409EFF",cursor:"pointer"},on:{click:function(s){return e.showDel(t.$index)}}}),e._v(" "),1==e.isShowDel[t.$index]?s("el-button",{staticClass:"del",attrs:{type:"text",size:"small"},on:{click:function(s){return e.del(t.row)}}},[e._v("删除")]):e._e()],1),e._v(" "),s("span",[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.routeToDetail(t.row)}}},[e._v("查看")])],1),e._v(" "),s("span",[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.resetPass(t.row)}}},[e._v("重置密码")])],1)])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{layout:"prev, pager, next, jumper",total:e.paginations.total,"page-size":e.paginations.page_size,"current-page":e.paginations.page_current},on:{"update:currentPage":function(t){return e.$set(e.paginations,"page_current",t)},"update:current-page":function(t){return e.$set(e.paginations,"page_current",t)},"current-change":e.handleCurrentChange}})],1)]),e._v(" "),s("el-dialog",{attrs:{title:"修改密码",visible:e.isPass,width:"30%"},on:{"update:visible":function(t){e.isPass=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{attrs:{prop:"newPass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入新密码"},model:{value:e.form.newPass,callback:function(t){e.$set(e.form,"newPass",t)},expression:"form.newPass"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"checkNewPass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入新密码"},model:{value:e.form.checkNewPass,callback:function(t){e.$set(e.form,"checkNewPass",t)},expression:"form.checkNewPass"}})],1),e._v(" "),s("el-form-item",[s("el-button",{on:{click:function(t){e.isPass=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updatePass("form")}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(a,n,!1,function(e){s("cNE2")},"data-v-f3b50bb6",null);t.default=o.exports},cNE2:function(e,t){}});
//# sourceMappingURL=16.06f4dfa87053cd291011.js.map