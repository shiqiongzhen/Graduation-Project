webpackJsonp([25],{"/6uQ":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={props:{},data:function(){return{navData:[{name:"班级管理",path:""},{name:"添加班级",path:""}],list:[],isConfirm:[],form:[],rules:{className:[{required:!0,message:"不能为空",trigger:"blur"}],college:[{required:!0,message:"不能为空",trigger:"blur"}],series:[{required:!0,message:"不能为空",trigger:"blur"}],major:[{required:!0,message:"不能为空",trigger:"blur"}],student:[{required:!0,message:"不能为空",trigger:"blur"}]}}},computed:{},created:function(){},mounted:function(){},watch:{},methods:{add:function(){this.list.push({userNumber:"",nickname:"",password:""});var e=this.list.length;this.isConfirm[e-1]="false",this.$set(this.isConfirm,e-1,this.isConfirm[e-1])},edit:function(e){this.isConfirm[e]="false",this.$set(this.isConfirm,e,this.isConfirm[e])},confirm:function(e){this.isConfirm[e]="true",this.$set(this.isConfirm,e,this.isConfirm[e])},initIsConfirm:function(e){var t=this;e.forEach(function(){t.isConfirm.push("true")})},readFile:function(e){var t=this;"0"==e.code?(this.$message({message:"导入成功，请核对数据",type:"success"}),e.data.forEach(function(e){t.list.push(e)}),this.initIsConfirm(this.list)):"1"==e.code?this.$router.push("/login"):this.$message({message:e.msg,type:"error"})},submit:function(){var e=this;-1==this.isConfirm.indexOf("false")?this.$http.post("/teaching/admin/class/addStudentByBatch",{className:this.form.className,college:this.form.college,series:this.form.series,major:this.form.major,userList:this.list}).then(function(t){"0"==t.data.code?(e.$message({message:"新增成功！",type:"success"}),e.list=[],e.form={}):"1"==t.data.code?e.$router.push("/login"):e.$message({message:t.data.msg,type:"error"})}).catch(function(e){console.log(e)}):this.$message({message:"请先确认信息！",type:"error"})}},components:{breadCrumb:s("ZmIX").a}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("div",{staticClass:"head"},[s("breadCrumb",{attrs:{data:e.navData}}),e._v(" "),s("h4",[e._v("添加班级")])],1),e._v(" "),s("div",{staticClass:"container"},[s("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"1",mode:"horizontal"}},[s("el-menu-item",{attrs:{index:"1"}},[e._v("信息填写")])],1),e._v(" "),s("div",{staticClass:"contain"},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"班级名称",prop:"className"}},[s("el-input",{model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所在专业",prop:"major"}},[s("el-input",{model:{value:e.form.major,callback:function(t){e.$set(e.form,"major",t)},expression:"form.major"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所在系",prop:"series"}},[s("el-input",{model:{value:e.form.series,callback:function(t){e.$set(e.form,"series",t)},expression:"form.series"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所在院",prop:"college"}},[s("el-input",{model:{value:e.form.college,callback:function(t){e.$set(e.form,"college",t)},expression:"form.college"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"学生信息",prop:"student"}})],1),e._v(" "),s("div",{staticClass:"filteBar"},[s("div",[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.add()}}},[s("i",{staticClass:"el-icon-plus"}),e._v(" 新增\n                    ")]),e._v(" "),s("el-upload",{staticStyle:{display:"inline-block"},attrs:{action:"/teaching/common/file/readFile","show-file-list":!1,"on-success":e.readFile}},[s("el-button",{attrs:{size:"small"}},[e._v("批量导入")])],1)],1)]),e._v(" "),s("div",{staticClass:"content"},[s("el-alert",{attrs:{type:"info","show-icon":""}},[s("template",{slot:"title"},[s("div",[e._v("注：上传符合规格的execl文件即可完成信息批量导入，点击文件即可下载导入模板："),s("a",{staticClass:"colorText",attrs:{href:"/teaching/common/file/getExcelTemple"}},[e._v("添加学生模板.xls")])])])],2),e._v(" "),s("div",{staticClass:"list"},[s("ul",[e._m(0),e._v(" "),e._l(e.list,function(t,i){return s("li",{key:i},["true"==e.isConfirm[i]?s("span",{staticClass:"liContent confirm"},[s("span",[e._v(e._s(t.userNumber))]),e._v(" "),s("span",[e._v(e._s(t.nickname))]),e._v(" "),s("span",[e._v(e._s(t.password))]),e._v(" "),s("span",[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.edit(i)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"}},[e._v("删除")])],1)]):s("span",{staticClass:"liContent edit"},[s("span",[s("el-input",{attrs:{size:"small"},model:{value:t.userNumber,callback:function(s){e.$set(t,"userNumber",s)},expression:"item.userNumber"}})],1),e._v(" "),s("span",[s("el-input",{attrs:{size:"small"},model:{value:t.nickname,callback:function(s){e.$set(t,"nickname",s)},expression:"item.nickname"}})],1),e._v(" "),s("span",[s("el-input",{attrs:{size:"small",placeholder:"默认为工号"},model:{value:t.password,callback:function(s){e.$set(t,"password",s)},expression:"item.password"}})],1),e._v(" "),s("span",{staticStyle:{"padding-left":"calc(1em + 15px)"}},[s("el-button",{staticClass:"colorText1",attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirm(i)}}},[e._v("确认")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"}},[e._v("删除")])],1)])])})],2)]),e._v(" "),s("div",{staticClass:"footer"},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submit()}}},[e._v("\n                        确认添加\n                    ")])],1)],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticStyle:{background:"#F4F4F5",color:"#909399"}},[t("span",{staticClass:"liContent"},[t("span",[this._v("学号/工号")]),this._v(" "),t("span",[this._v("学生姓名")]),this._v(" "),t("span",[this._v("初始密码")]),this._v(" "),t("span",[this._v("操作")])])])}]};var r=s("VU/8")(i,a,!1,function(e){s("kohl")},"data-v-c6e6c51e",null);t.default=r.exports},kohl:function(e,t){}});
//# sourceMappingURL=25.bfd11cd1d8e4a6326cdc.js.map